<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Enciclopédia JoJo</title>
    <link rel="stylesheet" href="css/style.css">

    <!-- Importa Chart.js direto da CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Estilo adicional só para esta página -->
    <style>
        h2{
            text-align: center;
            color: #ffd6ff;
        }

        select{
            display: block;
            margin: 1rem auto;
            padding: 6px 10px;
            font-size: 1rem;
            border-radius: 8px;
            background-color: #3c1361;
            color: #fff;
            border: none;
        }
    </style>
</head>

<body>
    <header>
        <h1>Enciclopédia JJBA - Stands</h1>
        <nav>
            <a href="index.html">Início</a>
            <a href="characters.html">Personagens</a>
            <!-- <a href="battles.html">Batalhas</a> -->
            <!-- <a href="parts.html">Partes</a> -->
        </nav>
    </header>

    <main>
        <section>
            <h2>Selecione um Stand</h2>
            <select id="standSelect" onchange="carregarGrafico()">
                <option value="The Hand">The Hand</option>
                <option value="Star Platinum">Star Platinum</option>
                <option value="Crazy Diamond">Crazy Diamond</option>
                <option value="Killer Queen">Killer Queen</option>
            </select>

            <div class="chart-box">
                <div class="chart-container">
                    <canvas id="standChart"></canvas>
                </div>
            </div>
        </section>
    </main>

    <script>
        //Dados de exemplo (simulando o que virá da API futuramente)
        const standsData = {
            "The Hand": [4, 3, 2, 3, 3, 1],
            "Star Platinum": [5, 5, 2, 5, 5, 3],
            "Crazy Diamond": [5, 4, 2, 4, 4, 3],
            "Killer Queen": [4, 3, 2, 4, 4, 4]
        };

        const labels = ['Power', 'Speed', 'Range', 'Durability', 'Precision', 'Potential'];
        let chartInstance = null;

        function carregarGrafico(){
            const standName = document.getElementById("standSelect").value;
            const stats = standsData[standName];

            const ctx = document.getElementById("standChart").getContext("2d");

            //Destroi o gráfico anterior para evitar sobreposição
            if (chartInstance) chartInstance.destroy();

            chartInstance = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: standName,
                        data: stats,
                        fill: true,
                        backgroundColor: 'rgba(157, 78, 221, 0.2)',  //preenchimento translúcido
                        borderColor: '#c77dff',                      //linha principal
                        pointBackgroundColor: '#ffb3fd',             //pontos
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: '#9d4edd'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    layout: {
                        padding: {
                            top: 20,
                            bottom: 20,
                            right: 20   //reduz margem direita (stats grandes como 'potential' jogam o grafo pra direita)
                        }
                    },
                    scales: {
                        r: {
                            suggestedMin: 0,
                            suggestedMax: 5,
                            grid: {
                                color: 'rgba(255, 255, 255, 0.2)',
                                circular: true
                            },
                            angleLines: {
                                color: 'rgba(255, 255, 255, 0.15)',
                                lineWidth: 1
                            },
                            pointLabels: {
                                color: '#ffffff',
                                font: {
                                    size: 12,
                                    weight: 'bold'
                                },
                                padding: 6
                            },
                            ticks: {
                                stepSize: 1,
                                color: '#ffffff',
                                backdropColor: 'transparent',
                                font: {size: 12, weight: 'bold'},
                                tickLength: 0,
                                callback: function (value){
                                    const letters = ['E', 'D', 'C', 'B', 'A'];
                                    return letters[value - 1] || '';
                                }
                            }
                        }
                    },
                    plugins: {legend: {display: false}}
                }
            });
        }

        //Carrega gráfico inicial ao abrir a página
        window.onload = carregarGrafico;
    </script>
</body>
</html>